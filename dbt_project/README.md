# DBT Project

## Introduction to DBT
DBT (Data Build Tool) is a modern data transformation framework that enables analysts and engineers to transform, test, and document data within the data warehouse. DBT helps to streamline data modeling workflows, ensuring modularity, scalability, and maintainability.

## Installing DBT
To install DBT, refer to the [DBT Installation Guide](https://docs.getdbt.com/docs/introduction).

## Configuring DBT to Connect with BigQuery
Follow the [official DBT BigQuery Configuration Guide](https://docs.getdbt.com/docs/core/connect-data-platform/bigquery-setup) to configure DBT for BigQuery.

After successful configuration, you should have a `profiles.yml` file in `~/.dbt/profiles.yml` (if using Ubuntu) with the following structure:

```yaml
dbt_project:
  outputs:
    dev:
      dataset: --Name-of-your-dataset
      job_execution_timeout_seconds: 300
      job_retries: 1
      keyfile: Path-to-your-service-account-file
      location: US
      method: service-account
      priority: interactive
      project: --Your-project-id
      threads: 4
      type: bigquery
  target: dev
```

### Common DBT Commands
Once DBT is installed and configured, you can run your project using the following commands:

- `dbt debug`: Checks the project's configuration to ensure everything is set up correctly. If it returns `All checks passed`, your configuration is correct.
- `dbt run`: Executes all the models in your project, creating tables or views in the database as defined by your SQL queries.

## DBT Project Directory Structure
A DBT project is typically organized with the following directories and files:

- **`models/`**: Contains SQL models that define transformations for creating tables or views in your database. This folder includes three subfolders representing three layers:
  - `L1_Staging`
  - `L2_Transform`
  - `L3_Mart`

- **`analyses/`**: Holds SQL queries used for analysis or experimentation but not deployed directly.

- **`logs/`**: Stores log files generated during DBT runs, useful for debugging and monitoring.

- **`macros/`**: Contains reusable SQL code snippets, simplifying complex queries by encapsulating them into modular functions.

- **`seeds/`**: Includes CSV files containing raw datasets that DBT can load directly into the database.

- **`snapshots/`**: Maintains snapshots of data at specific points in time for tracking and comparison.

- **`tests/`**: Contains tests to validate data accuracy or logic.

- **`target/`**: Stores output generated by DBT commands.

- **`README.md`**: Documentation and instructions for the project.

- **`dbt_project.yml`**: The main configuration file for the project, specifying project settings, folder paths, and database interaction settings (e.g., `view` or `table` modes).

## Difference Between `dbt_project.yml` and `profiles.yml`

### `dbt_project.yml`
- Project-level configuration file.
- Defines project-specific details such as the project name, directory structure, and settings for models, seeds, and snapshots.

### `profiles.yml`
- User-level configuration file located in `~/.dbt/`.
- Stores connection details for the data warehouse (e.g., host, user, password, schema).
- Allows sharing of connection settings across multiple DBT projects.

## Notes
- Ensure that the `dbt_project.yml` file is correctly configured before running any DBT commands. If you encounter any issues or errors, use the `dbt debug` command and review the logs to identify and fix the problem.

## Supporting Resources
- [DBT Official Documentation](https://docs.getdbt.com/)
- [DBT Community Forum](https://discourse.getdbt.com/)
- [DBT Slack Community](https://www.getdbt.com/community/join-the-community/)
- [DBT GitHub Repository](https://github.com/dbt-labs/dbt-core)

